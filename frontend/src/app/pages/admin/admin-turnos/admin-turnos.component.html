<div class="admin-turnos">
  <div class="admin-turnos__header">
    <h1>Gestión de turnos</h1>
    <p>Acá podés revisar, editar o cancelar los turnos de tus clientas.</p>
  </div>

  <!-- Mensajes -->
  <p *ngIf="errorMsg" class="estado estado--error">{{ errorMsg }}</p>
  <p *ngIf="mensajeOk" class="estado estado--ok">{{ mensajeOk }}</p>
  <p *ngIf="cargando">Cargando turnos...</p>

  <!-- Tabla -->
  <div class="tabla-wrapper" *ngIf="!cargando && turnos.length > 0">
    <table class="tabla-turnos">
      <thead>
        <tr>
          <th>Cliente</th>
          <th>Profesional</th>
          <th>Servicio</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Estado</th>
          <th class="col-acciones">Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let t of turnos">
          <td>{{ t.usuario }}</td>
          <td>{{ t.profesional }}</td>
          <td>{{ t.servicio }}</td>
          <td>{{ t.fecha }}</td>
          <td>{{ t.hora }}</td>

          <td>
            <span [ngClass]="getBadgeClass(t.estado)">
              {{ t.estado }}
            </span>
          </td>

          <td class="col-acciones">
            <button
              type="button"
              class="btn-editar"
              (click)="editarTurno(t)"
              [disabled]="accionandoId === t.id"
            >
              {{ accionandoId === t.id ? 'Editando...' : 'Editar' }}
            </button>

            <button
              type="button"
              class="btn-cancelar"
              (click)="cancelarTurno(t)"
              [disabled]="cancelandoId === t.id || t.estado === 'cancelado'"
            >
              {{ cancelandoId === t.id ? 'Cancelando...' : 'Cancelar' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Sin turnos -->
  <p *ngIf="!cargando && turnos.length === 0 && !errorMsg">
    No hay turnos cargados.
  </p>
</div>
